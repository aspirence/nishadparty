{% extends 'base.html' %}

{% block title %}Donation Receipt - Nishad Party{% endblock %}

{% block extra_css %}
<style>
.receipt-container {
    background: white;
    border: 2px solid #007bff;
    border-radius: 10px;
    padding: 30px;
    margin: 20px 0;
}

.receipt-header {
    text-align: center;
    border-bottom: 3px solid #007bff;
    padding-bottom: 20px;
    margin-bottom: 30px;
}

.receipt-logo {
    font-size: 2.5rem;
    font-weight: bold;
    color: #007bff;
    margin-bottom: 10px;
}

.receipt-number {
    font-family: 'Courier New', monospace;
    font-size: 1.2rem;
    font-weight: bold;
    background: #f8f9fa;
    padding: 10px;
    border-radius: 5px;
    display: inline-block;
}

.amount-box {
    background: linear-gradient(135deg, #28a745, #20c997);
    color: white;
    padding: 20px;
    border-radius: 10px;
    text-align: center;
    margin: 20px 0;
}

.signature-section {
    margin-top: 40px;
    border-top: 1px solid #dee2e6;
    padding-top: 20px;
}

@media print {
    body { margin: 0; }
    .btn, .breadcrumb, nav, footer, .no-print { display: none !important; }
    .receipt-container { border: 2px solid #000; margin: 0; }
    .amount-box { background: #f8f9fa !important; color: #000 !important; border: 2px solid #000; }
}

.qr-code {
    width: 120px;
    height: 120px;
    background: #f8f9fa;
    border: 1px solid #dee2e6;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 5px;
}
</style>
{% endblock %}

{% block content %}
<div class="container">
    <div class="row no-print">
        <div class="col-12">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="{% url 'home' %}">Home</a></li>
                    <li class="breadcrumb-item"><a href="{% url 'donations:home' %}">Donations</a></li>
                    <li class="breadcrumb-item active">Receipt</li>
                </ol>
            </nav>
        </div>
    </div>

    <div class="row justify-content-center">
        <div class="col-lg-8">
            <div class="receipt-container">
                <!-- Header -->
                <div class="receipt-header">
                    <div class="receipt-logo">
                        <i class="bi bi-waves me-2"></i>Nishad Party
                    </div>
                    <h4>Donation Receipt</h4>
                    <p class="mb-2">Donation to Political Party</p>
                    <div class="receipt-number">
                        Receipt Number: {{ donation.receipt_number }}
                    </div>
                </div>

                <!-- Donor Information -->
                <div class="row mb-4">
                    <div class="col-md-6">
                        <h6>Donor Information</h6>
                        <table class="table table-borderless">
                            <tr>
                                <td><strong>Name:</strong></td>
                                <td>{{ donation.donor_name }}</td>
                            </tr>
                            <tr>
                                <td><strong>Email:</strong></td>
                                <td>{{ donation.donor_email }}</td>
                            </tr>
                            <tr>
                                <td><strong>Phone:</strong></td>
                                <td>{{ donation.donor_phone }}</td>
                            </tr>
                            {% if donation.donor_address %}
                            <tr>
                                <td><strong>Address:</strong></td>
                                <td>{{ donation.donor_address }}</td>
                            </tr>
                            {% endif %}
                            {% if donation.donor_pan %}
                            <tr>
                                <td><strong>PAN:</strong></td>
                                <td>{{ donation.donor_pan }}</td>
                            </tr>
                            {% endif %}
                        </table>
                    </div>
                    <div class="col-md-6">
                        <h6>Donation Details</h6>
                        <table class="table table-borderless">
                            <tr>
                                <td><strong>Date:</strong></td>
                                <td>{{ donation.created_at|date:"d M Y" }}</td>
                            </tr>
                            <tr>
                                <td><strong>Time:</strong></td>
                                <td>{{ donation.created_at|date:"h:i A" }}</td>
                            </tr>
                            <tr>
                                <td><strong>Payment Method:</strong></td>
                                <td>
                                    {% if donation.payment_method == 'ONLINE' %}Online
                                    {% elif donation.payment_method == 'CASH' %}Cash
                                    {% elif donation.payment_method == 'CHEQUE' %}Cheque
                                    {% elif donation.payment_method == 'UPI' %}UPI
                                    {% elif donation.payment_method == 'BANK_TRANSFER' %}Bank Transfer
                                    {% else %}{{ donation.get_payment_method_display }}
                                    {% endif %}
                                </td>
                            </tr>
                            {% if donation.purpose %}
                            <tr>
                                <td><strong>Purpose:</strong></td>
                                <td>{{ donation.purpose }}</td>
                            </tr>
                            {% endif %}
                            {% if donation.constituency %}
                            <tr>
                                <td><strong>Constituency:</strong></td>
                                <td>{{ donation.constituency }}</td>
                            </tr>
                            {% endif %}
                        </table>
                    </div>
                </div>

                <!-- Amount Box -->
                <div class="amount-box">
                    <h3 class="mb-2">Donation Amount</h3>
                    <h1 class="mb-0">₹{{ donation.amount|floatformat:2 }}</h1>
                    <p class="mb-0">Rupees {{ donation.amount|floatformat:0 }} Only</p>
                </div>

                <!-- Legal Information -->
                <div class="row mb-4">
                    <div class="col-12">
                        <div class="alert alert-info">
                            <h6><i class="bi bi-info-circle me-2"></i>Important Information</h6>
                            <ul class="mb-0 small">
                                <li>This donation is eligible for tax exemption under Section 13A of Income Tax Act</li>
                                <li>This receipt is proof of donation made to a political party</li>
                                {% if donation.amount >= 2000 %}
                                <li>Donations of ₹2000 or above are reported to Election Commission</li>
                                {% endif %}
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Signature Section -->
                <div class="signature-section">
                    <div class="row">
                        <div class="col-md-8">
                            <p><strong>On behalf of Nishad Party</strong></p>
                            <br><br>
                            <div style="border-bottom: 1px solid #000; width: 200px;"></div>
                            <p class="mb-0 small">Authorized Signatory</p>
                            <p class="small">Authorized Signatory</p>
                            
                            <div class="mt-3">
                                <p class="mb-0 small"><strong>Office Address:</strong></p>
                                <p class="small">Nishad Party Headquarters<br>
                                [Address will be here]<br>
                                Phone: [Phone Number]</p>
                            </div>
                        </div>
                        <div class="col-md-4 text-center">
                            <div class="qr-code">
                                <div class="text-center">
                                    <i class="bi bi-qr-code fs-1 text-muted"></i><br>
                                    <small class="text-muted">QR Code</small>
                                </div>
                            </div>
                            <small class="text-muted">For receipt verification</small>
                        </div>
                    </div>
                </div>

                <!-- Footer -->
                <div class="text-center mt-4 small text-muted">
                    <p>This is a computer generated receipt and does not require signature</p>
                    <p>This is a computer generated receipt and does not require signature</p>
                    <p>Generated on: {{ donation.created_at|date:"d M Y, h:i A" }}</p>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="text-center no-print mb-4">
                <button onclick="window.print()" class="btn btn-primary me-2">
                    <i class="bi bi-printer me-1"></i>Print
                </button>
                <a href="{% url 'donations:home' %}" class="btn btn-secondary me-2">
                    <i class="bi bi-arrow-left me-1"></i>Go Back
                </a>
                {% if user.is_authenticated %}
                <a href="{% url 'donations:my_donations' %}" class="btn btn-outline-primary">
                    <i class="bi bi-list me-1"></i>View My Donations
                </a>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock %}